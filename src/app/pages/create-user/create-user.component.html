<div class="max-w-md mx-auto bg-white shadow-md rounded-lg p-6">
  <h2 class="text-2xl font-semibold text-gray-800 mb-4">Criar Novo Usuário</h2>
  <form [formGroup]="userForm" class="space-y-4" (ngSubmit)="salvarUsuario()">
    <div class="flex items-center space-x-4">
      <div class="bg-gray-300 w-24 h-24 rounded-full overflow-hidden shadow-md">
        <img
          [src]="base64Image || 'assets/imagens/avatar/Avatar-Image.jpg'"
          alt="Foto do Usuário"
          class="w-full h-full object-cover"
        />
      </div>
      <div>
        <label for="foto" class="block text-sm font-medium text-gray-700">Foto (Upload)</label>
        <input
          id="foto"
          type="file"
          (change)="onFileSelected($event)"
          class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"
          accept="image/*"
        />
      </div>
    </div>

    <div>
      <label for="nome" class="block text-sm font-medium text-gray-700">Nome Completo</label>
      <input
        id="nome"
        type="text"
        formControlName="nome"
        class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"
      />
      <div *ngIf="userForm.get('nome')?.invalid && userForm.get('nome')?.touched" class="text-red-500 text-sm mt-1">
        <div *ngIf="userForm.get('nome')?.errors?.['required']">Preencha o nome.</div>
        <div *ngIf="userForm.get('nome')?.errors?.['minlength']">Mínimo 3 letras.</div>
      </div>
    </div>

    <div>
      <label for="email" class="block text-sm font-medium text-gray-700">E-mail</label>
      <input
        id="email"
        type="email"
        formControlName="email"
        class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"
      />
      <div *ngIf="userForm.get('email')?.invalid && userForm.get('email')?.touched" class="text-red-500 text-sm mt-1">
        <div *ngIf="userForm.get('email')?.errors?.['required']">Preencha o e-mail.</div>
        <div *ngIf="userForm.get('email')?.errors?.['email']">E-mail inválido.</div>
        <div *ngIf="userForm.get('email')?.errors?.['semArroba']">Falta "@" no e-mail.</div>
      </div>
    </div>

    <div>
      <label for="telefone" class="block text-sm font-medium text-gray-700">Telefone</label>
      <input
        id="telefone"
        type="text"
        formControlName="telefone"
        mask="(00) 00000-0000"
        class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"
      />
      <div *ngIf="userForm.get('telefone')?.invalid && userForm.get('telefone')?.touched" class="text-red-500 text-sm mt-1">
        <div *ngIf="userForm.get('telefone')?.errors?.['required']">Preencha o telefone.</div>
        <div *ngIf="userForm.get('telefone')?.errors?.['pattern']">Formato: (99) 99999-9999.</div>
      </div>
    </div>

    <div>
      <label for="dataNascimento" class="block text-sm font-medium text-gray-700">Data de Nascimento</label>
      <input
        id="dataNascimento"
        type="date"
        formControlName="dataNascimento"
        class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"
      />
      <div *ngIf="userForm.get('dataNascimento')?.invalid && userForm.get('dataNascimento')?.touched" class="text-red-500 text-sm mt-1">
        <div *ngIf="userForm.get('dataNascimento')?.errors?.['required']">Preencha a data.</div>
        <div *ngIf="userForm.get('dataNascimento')?.errors?.['dataInvalida']">Idade entre 18 e 100.</div>
      </div>
    </div>

    <div>
      <label for="tipoUsuario" class="block text-sm font-medium text-gray-700">Tipo de Usuário</label>
      <select
        id="tipoUsuario"
        formControlName="tipoUsuario"
        class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"
      >
        <option value="">Selecione...</option>
        <option value="Administrador">Administrador</option>
        <option value="Editor">Editor</option>
        <option value="Visualizador">Visualizador</option>
      </select>
      <div *ngIf="userForm.get('tipoUsuario')?.invalid && userForm.get('tipoUsuario')?.touched" class="text-red-500 text-sm mt-1">
        <div *ngIf="userForm.get('tipoUsuario')?.errors?.['required']">Escolha um tipo.</div>
      </div>
    </div>

    <div class="flex justify-between mt-6">
      <button
        type="submit"
        [disabled]="!userForm.valid"
        class="py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-offset-2
          text-white
          bg-blue-500 hover:bg-blue-600 focus:ring-blue-500
          disabled:bg-gray-400 disabled:cursor-not-allowed"
      >
        Salvar
      </button>
      <button
        type="button"
        (click)="cancelar()"
        class="bg-gray-500 text-white py-2 px-4 rounded hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"
      >
        Cancelar
      </button>
    </div>
  </form>
</div>
